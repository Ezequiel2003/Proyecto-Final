<head>
<title>rotpen.html</title>
<!-- Created by Maple 9.03, IBM INTEL NT -->
</head>
<body bgcolor="FFFFFF">
<basefont size="3">
<a name="MapleAutoBookmark1" />
<p align="center">
<b><u><font color="#000000" size="6">Dynamic Equations for the Rotary Single Inverted Pendulum (SIP)</font></u></b>
</p>
<p align="center">
<i><font color="#000000">©</font></i>
<i><font color="#000000">&nbsp;2011 Quanser Consulting Inc.</font></i>
</p>
<p align="center">
<font color="#000000">URL: </font>
<a href="http://www.quanser.com" target="_top">http://www.quanser.com</a></p>
<p align="center">
<font color="#000000" size="2">NOTE: This worksheet presents the general dynamic equations modelling a Single Inverted Pendulum mounted on a rotary arm.</font>
</p>
<p align="center"><a name="Description" />
</p>
<dl><a name="MapleAutoBookmark2" />
<p align="left">
<b><font color="#000000" size="5">Description</font></b>
</p>
<ul><li>
<font color="#000000">This worksheet presents the general dynamic equations modelling a single inverted pendulum mounted on a rotary pendulum.</font>
</li>
<li>
<font color="#000000">Specifically, this worksheet is used to derive the state-space matrices for the Quanser's </font>
<b><font color="#000000">Single Inverted Pendulum (SIP)</font></b>
<font color="#000000">&nbsp;experiment.</font>
</li>
<li>
<font color="#000000">The resulting inverted pendulum system has 2-Degrees-Of-Freedom (DOF), for a planar motion.</font>
</li>
<li>
<font color="#000000">The Lagrange's method is used to obtain the dynamic model of the system.</font>
</li>
<dl><a name="MapleAutoBookmark3" />
</ul>
<p align="left">
<b><font color="#000000" size="4">The </font></b>
<i><b><font color="#000000" size="4">Quanser_Tools</font></b></i>
<b><font color="#000000" size="4">&nbsp;Package</font></b>
</p>
<ul><li>
<font color="#000000">The </font>
<i><font color="#000000">Quanser_Tools</font></i>
<font color="#000000">&nbsp;module defines generic procedures and data in relation to determining the state-space representation of all the Quanser experiments. Specifically, this means deriving and solving the Lagrange's equations of the Quanser systems.</font>
</li>
<li>
<font color="#000000">The </font>
<i><font color="#000000">quanser</font></i>
<font color="#000000">&nbsp;repository containing the </font>
<i><font color="#000000">Quanser_Tools</font></i>
<font color="#000000">&nbsp;package is implemented in the 2 following files: </font>
<i><font color="#000000">quanser.ind</font></i>
<font color="#000000">&nbsp;and </font>
<i><font color="#000000">quanser.lib.</font></i>
<font color="#000000">&nbsp;If these two files are not readily available, they can be generated by executing the Maple worksheet titled: </font>
<i><font color="#000000">quanser_tools.mws</font></i>
<font color="#000000">.</font>
</li>
<li>
<b><font color="#000000">To install</font></b>
<font color="#000000">&nbsp;the </font>
<i><font color="#000000">Quanser_Tools</font></i>
<font color="#000000">&nbsp;package, copy the two files </font>
<i><font color="#000000">quanser.ind</font></i>
<font color="#000000">&nbsp;and </font>
<i><font color="#000000">quanser.lib</font></i>
<font color="#000000">&nbsp;&nbsp;into a directory of your choice, like for example: "C:\Program Files\Quanser\Maple Repository". </font>
</li>
<li>
<b><font color="#000000">To use</font></b>
<font color="#000000">&nbsp;the </font>
<i><font color="#000000">Quanser_Tools</font></i>
<font color="#000000">&nbsp;package in a Maple worksheet, add the path to its disk location to the Maple global variable </font>
<i><font color="#000000">libname</font></i>
<font color="#000000">. For example, this can be achieved by the following Maple command: <br />
libname := </font>
<i><font color="#000000">&nbsp;"C:/Program Files/Quanser/Maple Repository", libname:</font></i>
</li>
</dl><dl><a name="MapleAutoBookmark4" />
</ul>
<p align="left">
<b><font color="#000000" size="4">References</font></b>
</p>
<ul><li>
<font color="#000000">For an overview of some of the possible control challenges offered by the Quanser Rotary experiments please visit the following link on the Quanser's website: </font>
<a href="http://www.quanser.com/english/html/challenges/fs_chall_rotary_flash.htm" target="_top">Rotary Control Challenges</a></li>
</dl></ul>
<p align="left">
</p>
</dl><dl><a name="MapleAutoBookmark5" />
<p align="left">
<b><font color="#000000" size="5">Worksheet Initialization</font></b>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">restart: interface( imaginaryunit = j ): </font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">Choose to generated model for Single-Inverted Pendulum (SIP) or Single Pendulum Gantry (SPG). The gantry is when the pendulum is in the hanging down position.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Pend_Config := SIP;<br />
#Pend_Config := SPG;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen1.gif" width="144" height="20" alt="Pend_Config := SIP" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">with( LinearAlgebra ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">libname := "C:/Program Files/Quanser/Maple Repository", ".", libname;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen2.gif" width="582" height="20" alt="libname := "C:/Program Files/Quanser/Maple Repository", ".", "C:\\Program Files\\Maple 9/lib"" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">with( Quanser_Tools );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/rotpen3.gif" width="775" height="20" alt="[HTM, deriveA, deriveB, deriveF, kinetic_energy, lagrange_equations, moment_of_inertia, n_norm, potential_energy, write_ABCD_to_Mfile]" />
<br />
<img src="images/rotpen4.gif" width="167" height="20" alt="[HTM, deriveA, deriveB, deriveF, kinetic_energy, lagrange_equations, moment_of_inertia, n_norm, potential_energy, write_ABCD_to_Mfile]" />
</p>
<p align="left">
<font color="#000000">environment variable representing the order of series calculations</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Order := 2:</font></b>
</td></tr>
</table>
</p>
</dl><dl><a name="MapleAutoBookmark6" />
<p align="left"><a name="Notations" />
<b><font color="#000000" size="5">Notations</font></b>
</p>
<dl><a name="MapleAutoBookmark7" />
<p align="left">
<b><font color="#000000" size="4">Generalized Coordinates: </font></b>
<img src="images/rotpen5.gif" width="29" height="36" alt="q[i]" align="middle" />
<b><font color="#000000" size="4">'s</font></b>
</p>
<p align="left">
<font color="#000000">The generalized coordinates are also called Lagrangian coordinates.</font>
</p>
<p align="left">
<img src="images/rotpen6.gif" width="43" height="32" alt="theta(t)" align="middle" />
<font color="#000000">&nbsp;= &nbsp;rotary arm / servo angular position </font>
</p>
<p align="left">
<img src="images/rotpen7.gif" width="46" height="32" alt="alpha(t)" align="middle" />
<font color="#000000">&nbsp;= &nbsp;the angle of the pendulum about the vertical (for SIP): the zero angle is defined when the pendulum is in the perfect upright position. If using SPG, then this angle is the pendulum about the downward position.</font>
</p>
<p align="left">
<font color="#000000">Np = number of links in pendulum</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Np := 1:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">q := [ theta(t), alpha(t)];</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen8.gif" width="123" height="20" alt="q := [theta(t), alpha(t)]" />
</p>
<p align="left">
<font color="#000000">Nq = number of Lagrangian coordinates (e.g. here, it is Nq = 2)</font>
</p>
<p align="left">
<font color="#000000">Nq is also the number of position states.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Nq := nops( q ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">qd = first-order time derivative of the generalized coordinates, e.g. position and angular velocities</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">qd := map( diff, q, t );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen9.gif" width="167" height="45" alt="qd := [diff(theta(t),t), diff(alpha(t),t)]" />
</p>
</dl><dl><a name="MapleAutoBookmark8" />
<p align="left">
<b><font color="#000000" size="4">Transformation Matrices</font></b>
</p>
<p align="left">
<font color="#000000">From base coordinate to tip of arm: T_0_1 = Rot(Z0, theta)*Trans(X1,Lr)</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">T_0_1 := matrix(4,4,[<br />
cos(q[1]),-sin(q[1]),0,L[r]*cos(q[1]),<br />
sin(q[1]),cos(q[1]),0,L[r]*sin(q[1]),<br />
0,0,1,0,<br />
0,0,0,1]);</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen10.gif" width="354" height="124" alt="T_0_1 := matrix([[cos(theta(t)), -sin(theta(t)), 0, L[r]*cos(theta(t))], [sin(theta(t)), cos(theta(t)), 0, L[r]*sin(theta(t))], [0, 0, 1, 0], [0, 0, 0, 1]])" />
</p>
<p align="left">
<font color="#000000">Assume pendulum center of mass if half link length</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">l[p] := L[p]/2;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen11.gif" width="77" height="45" alt="l[p] := 1/2*L[p]" />
</p>
<p align="left">
<font color="#000000">Inverted Pendulum Configuration: From tip of arm to CM of link 1: T_1_2 = &nbsp;Rot(X1, alpha)*Trans(Z2, l[p]).</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">if Pend_Config = SIP then<br />
T_1_2 := matrix(4,4,[<br />
1,0,0,0,<br />
0,cos(q[2]),-sin(q[2]),-l[p]*sin(q[2]),<br />
0,sin(q[2]),cos(q[2]),-l[p]*cos(q[2]),<br />
0,0,0,1]);<br />
else <br />
T_1_2 := matrix(4,4,[<br />
1,0,0,0,<br />
0,cos(q[2]),-sin(q[2]),l[p]*sin(q[2]),<br />
0,sin(q[2]),cos(q[2]),l[p]*cos(q[2]),<br />
0,0,0,1]); <br />
end;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen12.gif" width="386" height="160" alt="T_1_2 := matrix([[1, 0, 0, 0], [0, cos(alpha(t)), -sin(alpha(t)), -1/2*L[p]*sin(alpha(t))], [0, sin(alpha(t)), cos(alpha(t)), -1/2*L[p]*cos(alpha(t))], [0, 0, 0, 1]])" />
</p>
<p align="left">
<font color="#000000">CM of link 1 relative to base coordinate: T_0_2 = T_0_1 * T_1_2</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">T_0_2 := evalm( T_0_1 &amp;* T_1_2 );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen13.gif" width="730" height="185" alt="T_0_2 := matrix([[cos(theta(t)), -sin(theta(t))*cos(alpha(t)), sin(theta(t))*sin(alpha(t)), 1/2*sin(theta(t))*L[p]*sin(alpha(t))+L[r]*cos(theta(t))], [sin(theta(t)), cos(theta(t))*cos(alpha(t)), -cos(t..." />
</p>
</dl><p align="left">
</p>
<dl><a name="MapleAutoBookmark9" />
<p align="left">
<b><font color="#000000" size="4">Cartesian Coordinates of the Pendulum's Centre Of Gravity </font></b>
</p>
<p align="left">
<font color="#000000">conventions:</font>
</p>
<p align="left">
<font color="#000000">1) </font>
<img src="images/rotpen14.gif" width="52" height="32" alt="alpha = 0" align="middle" />
<font color="#000000">&nbsp;corresponds to the pendulum being perfectly vertical, pointing upwards</font>
</p>
<p align="left">
<font color="#000000">2) positive rotation of arm, </font>
<img src="images/rotpen15.gif" width="85" height="58" alt="0 &lt; diff(theta(t),t)" align="middle" />
<font color="#000000">, is CCW</font>
</p>
<p align="left">
<font color="#000000">3) positive rotation of pendulum, </font>
<img src="images/rotpen16.gif" width="88" height="58" alt="0 &lt; diff(alpha(t),t)" align="middle" />
<font color="#000000">&nbsp;&nbsp;is also CCW.</font>
</p>
<p align="left">
<font color="#000000">Absolute 3-dimensional Cartesian position: tip of arm.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">x[1] := T_0_1[1,4];<br />
y[1] := T_0_1[2,4];<br />
z[1] := T_0_1[3,4];<br />
</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen17.gif" width="133" height="27" alt="x[1] := L[r]*cos(theta(t))" />
</p>
<p align="center">
<img src="images/rotpen18.gif" width="127" height="27" alt="y[1] := L[r]*sin(theta(t))" />
</p>
<p align="center">
<img src="images/rotpen19.gif" width="58" height="27" alt="z[1] := 0" />
</p>
<p align="left">
<font color="#000000">Absolute 3-dimensional Cartesian position: center mass of pendulum.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">x[2] := T_0_2[1,4];<br />
y[2] := T_0_2[2,4];<br />
z[2] := T_0_2[3,4];</font></b>
</td></tr>
</table>
</p>
<p align="left">
</p>
<p align="center">
<img src="images/rotpen20.gif" width="304" height="45" alt="x[2] := 1/2*sin(theta(t))*L[p]*sin(alpha(t))+L[r]*cos(theta(t))" />
</p>
<p align="center">
<img src="images/rotpen21.gif" width="312" height="45" alt="y[2] := -1/2*cos(theta(t))*L[p]*sin(alpha(t))+L[r]*sin(theta(t))" />
</p>
<p align="center">
<img src="images/rotpen22.gif" width="157" height="45" alt="z[2] := -1/2*L[p]*cos(alpha(t))" />
</p>
<p align="left">
<font color="#000000">Absolute 3-dimensional Cartesian velocities.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">xd[1] := diff( x[1], t );<br />
yd[1] := diff( y[1], t );<br />
zd[1] := diff( z[1], t );<br />
xd[2] := diff( x[2], t );<br />
yd[2] := diff( y[2], t );<br />
zd[2] := diff( z[2], t );<br />
</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen23.gif" width="209" height="45" alt="xd[1] := -L[r]*sin(theta(t))*diff(theta(t),t)" />
</p>
<p align="center">
<img src="images/rotpen24.gif" width="204" height="45" alt="yd[1] := L[r]*cos(theta(t))*diff(theta(t),t)" />
</p>
<p align="center">
<img src="images/rotpen25.gif" width="66" height="27" alt="zd[1] := 0" />
</p>
<p align="center">
<img src="images/rotpen26.gif" width="683" height="45" alt="xd[2] := 1/2*cos(theta(t))*diff(theta(t),t)*L[p]*sin(alpha(t))+1/2*sin(theta(t))*L[p]*cos(alpha(t))*diff(alpha(t),t)-L[r]*sin(theta(t))*diff(theta(t),t)" />
</p>
<p align="center">
<img src="images/rotpen27.gif" width="687" height="45" alt="yd[2] := 1/2*sin(theta(t))*diff(theta(t),t)*L[p]*sin(alpha(t))-1/2*cos(theta(t))*L[p]*cos(alpha(t))*diff(alpha(t),t)+L[r]*cos(theta(t))*diff(theta(t),t)" />
</p>
<p align="center">
<img src="images/rotpen28.gif" width="218" height="45" alt="zd[2] := 1/2*L[p]*sin(alpha(t))*diff(alpha(t),t)" />
</p>
<p align="left">
</p>
</dl><dl><a name="MapleAutoBookmark10" />
<p align="left">
<b><font color="#000000" size="4">State-Space Variables</font></b>
</p>
<ul><li>
<font color="#000000">The chosen states should at least include the generalized coordinates and their first-time derivatives.</font>
</li>
<li>
<font color="#000000">X is the state vector.</font>
</li>
<li>
<font color="#000000">In the state vector X: Lagrangian coordinates are first, followed by their first-time derivatives, and finally any other states, as required.</font>
</li>
</ul>
<p align="left">
<font color="#000000">Substitution sets for the states (to obtain time-independent state equations).</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">subs_Xq := { seq( q[i] = X[i], i=1..Nq ) };<br />
subs_Xqd := { seq( qd[i] = X[i+Nq], i=1..Nq ) };</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen29.gif" width="244" height="27" alt="subs_Xq := {theta(t) = X[1], alpha(t) = X[2]}" />
</p>
<p align="center">
<img src="images/rotpen30.gif" width="286" height="45" alt="subs_Xqd := {diff(theta(t),t) = X[3], diff(alpha(t),t) = X[4]}" />
</p>
<p align="left">
<font color="#000000">Substitution set for the input(s).</font>
</p>
<p align="left">
<font color="#000000">set the input to be the motor voltage:</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">#subs_U := { V[m] = U[1] }:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">set the input to be the torque applied by the motor shaft, </font>
<img src="images/rotpen31.gif" width="65" height="32" alt="tau[output]" align="middle" />
<font color="#000000">&nbsp;(if not expressed as a function of the motor voltage): </font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">subs_U := { tau[m] = U[1] }:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">Nu = number of inputs; U = input (row) vector (e.g. U = [ V[m] ] )</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Nu := nops( subs_U ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">substitution set for the position states' second time derivatives</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">subs_Xqdd := { seq( diff( q[i], t$2 ) = &nbsp;Xd[i+Nq], i=1..Nq ) };</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen32.gif" width="329" height="63" alt="subs_Xqdd := {diff(theta(t),`$`(t,2)) = Xd[3], diff(alpha(t),`$`(t,2)) = Xd[4]}" />
</p>
<p align="left">
<font color="#000000">second time derivatives of the position states (written as time-independent variables).</font>
</p>
<p align="left">
<font color="#000000">The set of unknowns is obtained from this list to solve the Lagrange's equations of motion.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Xqdd := [ seq( Xd[i+Nq], i=1..Nq ) ];</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen33.gif" width="144" height="27" alt="Xqdd := [Xd[3], Xd[4]]" />
</p>
<p align="left">
<font color="#000000">substitution set to linearize the state-space matrices (i.e. A and B) </font>
</p>
<p align="left">
<font color="#000000">about the quiescent null state vector (small-displacement theory)</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">subs_XUzero := { seq( X[i] = 0, i=1..2*Nq ), seq( U[i] = 0, i=1..Nu ) }:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">Nx = dim( X ) = total number of states (should be greater than or equal to: 2 * Nq)</font>
</p>
<p align="left">
<font color="#000000">Ny = chosen number of outputs</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Nx := 2 * Nq + 0:<br />
Ny := Nq:</font></b>
</td></tr>
</table>
</p>
</dl></dl><dl><a name="MapleAutoBookmark11" />
<p align="left">
<b><font color="#000000" size="5">Total Potential and Kinetic Energies of the System</font></b>
</p>
<p align="left">
<font color="#000000">The total potential and kinetic energies are needed to calculate the Lagrangian of the system.</font>
</p>
<dl><a name="MapleAutoBookmark12" />
<p align="left">
<b><font color="#000000" size="4">Total Potential Energy: </font></b>
<img src="images/rotpen34.gif" width="39" height="36" alt="V[T]" align="middle" />
<b><font color="#000000" size="4">&nbsp;</font></b>
</p>
<p align="left">
<font color="#000000">The total potential energy can be expressed in terms of the generalized coordinates alone.</font>
</p>
<p align="left">
<font color="#000000">V[e] = Total Elastic Potential Energy of the system</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">V[e] := 0: </font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">V[g] = Total Gravitational Potential Energy of the system</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">V[g] := potential_energy( 'gravity', M[p], g, z[2] );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen35.gif" width="198" height="45" alt="V[g] := -1/2*M[p]*g*L[p]*cos(alpha(t))" />
</p>
<p align="left">
<font color="#000000">V[T] = Total Potential Energy of the system</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">V[T] := simplify( V[g] + V[e] );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen36.gif" width="199" height="45" alt="V[T] := -1/2*M[p]*g*L[p]*cos(alpha(t))" />
</p>
<p align="left">
</p>
</dl><dl><a name="MapleAutoBookmark13" />
<p align="left">
<b><font color="#000000" size="4">Total Kinetic Energy: </font></b>
<img src="images/rotpen37.gif" width="38" height="36" alt="T[T]" align="middle" />
</p>
<p align="left">
<font color="#000000">The total kinetic energy can be expressed in terms of the generalized coordinates and their first-time derivatives.</font>
</p>
<p align="left">
<img src="images/rotpen38.gif" width="39" height="32" alt="T[r1]" align="middle" />
<font color="#000000">&nbsp;= kinetic energy due to rotation of arm</font>
</p>
<p align="left">
<img src="images/rotpen39.gif" width="29" height="32" alt="J[r]" align="middle" />
<font color="#000000">&nbsp;= moment of inertia of rotary arm.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Tr[1] := kinetic_energy( 'rotation', J[r], qd[1] );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen40.gif" width="157" height="58" alt="Tr[1] := 1/2*J[r]*diff(theta(t),t)^2" />
</p>
<p align="left">
<font color="#000000">The pendulum motion is composed of one rotation and one translation. The rotation and translation directions of the link are orthogonal.</font>
</p>
<p align="left">
<font color="#000000">Rotational Pendulum Energy:</font>
</p>
<p align="left">
<img src="images/rotpen41.gif" width="63" height="58" alt="Diff(alpha(t),t)" align="middle" />
<font color="#000000">&nbsp;= pendulum absolute angular velocity</font>
</p>
<p align="left">
<font color="#000000">Tr[2] = pendulum rotational kinetic kinergy: set to zero since joint does not move around a lot.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Tr[2] := kinetic_energy( 'rotation', J[p], qd[2] );</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen42.gif" width="162" height="58" alt="Tr[2] := 1/2*J[p]*diff(alpha(t),t)^2" />
</p>
<p align="left">
<font color="#000000">Translational Pendulum Energy:</font>
</p>
<p align="left">
<font color="#000000">v[2] = pendulum cartesian velocity (magnitude)</font>
</p>
<p align="left">
<font color="#000000">Tt[2] = pendulum translational kinetic kinergy</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">v[2] := n_norm( [ xd[2], yd[2], zd[2] ], 2 ):<br />
Tt[2] := kinetic_energy( 'translation', M[p], v[2] );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/rotpen43.gif" width="751" height="58" alt="Tt[2] := 1/2*M[p]*((1/2*cos(theta(t))*diff(theta(t),t)*L[p]*sin(alpha(t))+1/2*sin(theta(t))*L[p]*cos(alpha(t))*diff(alpha(t),t)-L[r]*sin(theta(t))*diff(theta(t),t))^2+(1/2*sin(theta(t))*diff(theta(t),t..." />
<br />
<img src="images/rotpen44.gif" width="686" height="58" alt="Tt[2] := 1/2*M[p]*((1/2*cos(theta(t))*diff(theta(t),t)*L[p]*sin(alpha(t))+1/2*sin(theta(t))*L[p]*cos(alpha(t))*diff(alpha(t),t)-L[r]*sin(theta(t))*diff(theta(t),t))^2+(1/2*sin(theta(t))*diff(theta(t),t..." />
<br />
<img src="images/rotpen45.gif" width="228" height="58" alt="Tt[2] := 1/2*M[p]*((1/2*cos(theta(t))*diff(theta(t),t)*L[p]*sin(alpha(t))+1/2*sin(theta(t))*L[p]*cos(alpha(t))*diff(alpha(t),t)-L[r]*sin(theta(t))*diff(theta(t),t))^2+(1/2*sin(theta(t))*diff(theta(t),t..." />
</p>
<p align="left">
<font color="#000000">Total kinetic energy of rotary pendulum.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">T[T] := Tr[1] + Tr[2] + Tt[1] + Tt[2];<br />
T[T] := collect( T[T], diff ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/rotpen46.gif" width="371" height="58" alt="T[T] := 1/2*J[r]*diff(theta(t),t)^2+1/2*J[p]*diff(alpha(t),t)^2+Tt[1]+1/2*M[p]*((1/2*cos(theta(t))*diff(theta(t),t)*L[p]*sin(alpha(t))+1/2*sin(theta(t))*L[p]*cos(alpha(t))*diff(alpha(t),t)-L[r]*sin(the..." />
<br />
<img src="images/rotpen47.gif" width="664" height="58" alt="T[T] := 1/2*J[r]*diff(theta(t),t)^2+1/2*J[p]*diff(alpha(t),t)^2+Tt[1]+1/2*M[p]*((1/2*cos(theta(t))*diff(theta(t),t)*L[p]*sin(alpha(t))+1/2*sin(theta(t))*L[p]*cos(alpha(t))*diff(alpha(t),t)-L[r]*sin(the..." />
<br />
<img src="images/rotpen48.gif" width="686" height="58" alt="T[T] := 1/2*J[r]*diff(theta(t),t)^2+1/2*J[p]*diff(alpha(t),t)^2+Tt[1]+1/2*M[p]*((1/2*cos(theta(t))*diff(theta(t),t)*L[p]*sin(alpha(t))+1/2*sin(theta(t))*L[p]*cos(alpha(t))*diff(alpha(t),t)-L[r]*sin(the..." />
<br />
<img src="images/rotpen49.gif" width="228" height="58" alt="T[T] := 1/2*J[r]*diff(theta(t),t)^2+1/2*J[p]*diff(alpha(t),t)^2+Tt[1]+1/2*M[p]*((1/2*cos(theta(t))*diff(theta(t),t)*L[p]*sin(alpha(t))+1/2*sin(theta(t))*L[p]*cos(alpha(t))*diff(alpha(t),t)-L[r]*sin(the..." />
</p>
<p align="left">
</p>
</dl></dl><dl><a name="MapleAutoBookmark14" />
<p align="left">
<b><font color="#000000" size="5">Generalized Forces: </font></b>
<img src="images/rotpen50.gif" width="38" height="48" alt="Q[i]" align="middle" />
<b><font color="#000000" size="5">'s</font></b>
</p>
<p align="left">
<font color="#000000">The non-conservative forces corresponding to the generalized coordinates are: </font>
<img src="images/rotpen51.gif" width="35" height="32" alt="tau[m]" align="middle" />
<font color="#000000">&nbsp;and the viscous damping forces, where</font>
</p>
<p align="left">
<img src="images/rotpen52.gif" width="35" height="32" alt="tau[m]" align="middle" />
<font color="#000000">&nbsp;= torque generated by the motor driving the arm</font>
</p>
<p align="left">
<img src="images/rotpen53.gif" width="51" height="32" alt="B[arm]" align="middle" />
<font color="#000000">&nbsp;= arm viscous friction torque coefficient (a.k.a. viscous damping)</font>
</p>
<p align="left">
<img src="images/rotpen54.gif" width="33" height="32" alt="B[p]" align="middle" />
<font color="#000000">&nbsp;= pendulum 1 viscous friction torque coefficient (a.k.a. viscous damping)</font>
</p>
<p align="left">
<font color="#000000">Uncomment lines to set </font>
<img src="images/rotpen55.gif" width="56" height="32" alt="B[r] = 0" align="middle" />
<font color="#000000">&nbsp;and/or </font>
<img src="images/rotpen56.gif" width="33" height="32" alt="B[p]" align="middle" />
<font color="#000000">&nbsp;= 0 if viscous dampings are neglected.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">#D[r] := 0:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">#D[p] := 0:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">Q[i] = generalized force applied on generalized coordinate q[i]</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Q[1] := tau[m] - D[r] * qd[1];</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen57.gif" width="172" height="45" alt="Q[1] := tau[m]-D[r]*diff(theta(t),t)" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Q[2] := - D[p] * qd[2];</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen58.gif" width="150" height="45" alt="Q[2] := -D[p]*diff(alpha(t),t)" />
</p>
<p align="left">
<img src="images/rotpen59.gif" width="35" height="32" alt="tau[m]" align="middle" />
<font color="#000000">&nbsp;= torque produced by the motor at the motor pinion (i.e. after the gearbox): arm driving torque</font>
</p>
<p align="left">
<font color="#000000">rm: comment the following line out if </font>
<img src="images/rotpen60.gif" width="90" height="32" alt="u = tau[output]" align="middle" />
<font color="#000000">, uncomment it if </font>
<img src="images/rotpen61.gif" width="63" height="32" alt="u = V[m]" align="middle" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">#tau[m] := eta[g] * K[g] * eta[m] * K[t] * ( V[m] - K[g] * K[m] * qd[1] ) / R[m];</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Q := [ seq( Q[i], i=1..Nq ) ];</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen62.gif" width="283" height="45" alt="Q := [tau[m]-D[r]*diff(theta(t),t), -D[p]*diff(alpha(t),t)]" />
</p>
</dl><dl><a name="MapleAutoBookmark15" />
<p align="left">
<b><font color="#000000" size="5">Euler-Lagrange's Equations</font></b>
</p>
<p align="left">
<font color="#000000">For a </font>
<i><font color="#000000">N</font></i>
<font color="#000000">-DOF system, the Lagrange's equations can be written:</font>
</p>
<p align="left">
<img src="images/rotpen63.gif" width="217" height="58" alt="Diff(Diff(L,qdot[i]),t)-Diff(L,q[i]) = Q[i]" align="middle" />
<font color="#000000">&nbsp;&nbsp;for </font>
<img src="images/rotpen64.gif" width="45" height="32" alt="i = 1" align="middle" />
<font color="#000000">&nbsp;through </font>
<img src="images/rotpen65.gif" width="27" height="32" alt="N" align="middle" />
</p>
<p align="left">
<font color="#000000">where:</font>
</p>
<p align="left">
<font color="#000000">&nbsp;</font>
<img src="images/rotpen66.gif" width="31" height="32" alt="Q[i]" align="middle" />
<font color="#000000">'s are special combinations of external forces and called the </font>
<i><font color="#000000">generalized forces,</font></i>
</p>
<p align="left">
<i><font color="#000000">&nbsp;</font></i>
<img src="images/rotpen67.gif" width="32" height="32" alt="q[1]" align="middle" />
<font color="#000000">, ..., </font>
<img src="images/rotpen68.gif" width="35" height="32" alt="q[N]" align="middle" />
<font color="#000000">, are </font>
<i><font color="#000000">N </font></i>
<font color="#000000">independent coordinates chosen to describe the system and called the </font>
<i><font color="#000000">generalized coordinates</font></i>
<font color="#000000">,</font>
</p>
<p align="left">
<font color="#000000">&nbsp;and </font>
<img src="images/rotpen69.gif" width="25" height="32" alt="L" align="middle" />
<font color="#000000">&nbsp;is the </font>
<i><font color="#000000">Lagrangian</font></i>
<font color="#000000">&nbsp;of the system.</font>
</p>
<p align="left">
<img src="images/rotpen70.gif" width="25" height="32" alt="L" align="middle" />
<font color="#000000">&nbsp;is defined by:</font>
</p>
<p align="left">
<img src="images/rotpen71.gif" width="80" height="20" alt="L = T-U" />
</p>
<p align="left">
<font color="#000000">where </font>
<img src="images/rotpen72.gif" width="25" height="32" alt="T" align="middle" />
<font color="#000000">&nbsp;is the total kinetic energy of the system and </font>
<img src="images/rotpen73.gif" width="28" height="32" alt="U" align="middle" />
<font color="#000000">&nbsp;the total potential energy of the system.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">EOM_orig := lagrange_equations( T[T], V[T], q, Q );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/rotpen74.gif" width="560" height="67" alt="EOM_orig := [1/2*M[p]*diff(alpha(t),t)^2*L[p]*sin(alpha(t))*L[r]-1/2*M[p]*diff(alpha(t),`$`(t,2))*L[p]*cos(alpha(t))*L[r]+1/2*M[p]*diff(theta(t),t)*L[p]^2*sin(alpha(t))*cos(alpha(t))*diff(alpha(t),t)+d..." />
<br />
<img src="images/rotpen75.gif" width="755" height="63" alt="EOM_orig := [1/2*M[p]*diff(alpha(t),t)^2*L[p]*sin(alpha(t))*L[r]-1/2*M[p]*diff(alpha(t),`$`(t,2))*L[p]*cos(alpha(t))*L[r]+1/2*M[p]*diff(theta(t),t)*L[p]^2*sin(alpha(t))*cos(alpha(t))*diff(alpha(t),t)+d..." />
<br />
<img src="images/rotpen76.gif" width="636" height="63" alt="EOM_orig := [1/2*M[p]*diff(alpha(t),t)^2*L[p]*sin(alpha(t))*L[r]-1/2*M[p]*diff(alpha(t),`$`(t,2))*L[p]*cos(alpha(t))*L[r]+1/2*M[p]*diff(theta(t),t)*L[p]^2*sin(alpha(t))*cos(alpha(t))*diff(alpha(t),t)+d..." />
<br />
<img src="images/rotpen77.gif" width="801" height="67" alt="EOM_orig := [1/2*M[p]*diff(alpha(t),t)^2*L[p]*sin(alpha(t))*L[r]-1/2*M[p]*diff(alpha(t),`$`(t,2))*L[p]*cos(alpha(t))*L[r]+1/2*M[p]*diff(theta(t),t)*L[p]^2*sin(alpha(t))*cos(alpha(t))*diff(alpha(t),t)+d..." />
</p>
<p align="left">
<font color="#000000">this is to display the EOM's</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">EOM_orig := collect( EOM_orig, { seq( diff( q[i], t$2 ), i=1..Nq ), seq( diff( q[i], t ), i=1..Nq ), seq( q[i], i=1..Nq ) } );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/rotpen78.gif" width="748" height="67" alt="EOM_orig := [(J[r]+M[p]*L[r]^2+1/4*M[p]*L[p]^2-1/4*M[p]*L[p]^2*cos(alpha(t))^2)*diff(theta(t),`$`(t,2))+1/2*M[p]*diff(alpha(t),t)^2*L[p]*sin(alpha(t))*L[r]-1/2*M[p]*diff(alpha(t),`$`(t,2))*L[p]*cos(alp..." />
<br />
<img src="images/rotpen79.gif" width="733" height="63" alt="EOM_orig := [(J[r]+M[p]*L[r]^2+1/4*M[p]*L[p]^2-1/4*M[p]*L[p]^2*cos(alpha(t))^2)*diff(theta(t),`$`(t,2))+1/2*M[p]*diff(alpha(t),t)^2*L[p]*sin(alpha(t))*L[r]-1/2*M[p]*diff(alpha(t),`$`(t,2))*L[p]*cos(alp..." />
<br />
<img src="images/rotpen80.gif" width="730" height="67" alt="EOM_orig := [(J[r]+M[p]*L[r]^2+1/4*M[p]*L[p]^2-1/4*M[p]*L[p]^2*cos(alpha(t))^2)*diff(theta(t),`$`(t,2))+1/2*M[p]*diff(alpha(t),t)^2*L[p]*sin(alpha(t))*L[r]-1/2*M[p]*diff(alpha(t),`$`(t,2))*L[p]*cos(alp..." />
<br />
<img src="images/rotpen81.gif" width="283" height="67" alt="EOM_orig := [(J[r]+M[p]*L[r]^2+1/4*M[p]*L[p]^2-1/4*M[p]*L[p]^2*cos(alpha(t))^2)*diff(theta(t),`$`(t,2))+1/2*M[p]*diff(alpha(t),t)^2*L[p]*sin(alpha(t))*L[r]-1/2*M[p]*diff(alpha(t),`$`(t,2))*L[p]*cos(alp..." />
</p>
<p align="left">
<font color="#000000">Express the Euler-Lagrange equations of motion as functions of the states:</font>
</p>
<p align="left">
<font color="#000000">1) substitute (i.e. name) the acceleration states first! </font>
</p>
<p align="left">
<font color="#000000">2) then substitute the velocity states!</font>
</p>
<p align="left">
<font color="#000000">3) and only after, the position states, and the inputs!</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">EOM_states := subs( subs_Xqd, subs( subs_Xqdd, EOM_orig ) ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">EOM_states := subs( subs_Xq, subs_U, EOM_states ):</font></b>
</td></tr>
</table>
</p>
<dl><a name="MapleAutoBookmark16" />
<p align="left">
<b><font color="#000000" size="4">Linearization &nbsp;in the EOM's</font></b>
<font color="#000000" size="4">&nbsp;</font>
<b><font color="#000000" size="4">of the Trigonometric Functions</font></b>
</p>
<p align="left">
<font color="#000000">Linearization of the equations of motion around the quiescent point of operation (in order to solve them).</font>
</p>
<p align="left">
<font color="#000000">Here, linearization around the zero angles, i.e. for small-amplitude oscillations.</font>
</p>
<p align="left">
<font color="#000000">Linearization around: alpha0 = 0, and alpha_dot0 = 0</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">EOM_ser := EOM_states:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">Generalized series expansions of the trigonometric functions is used (for small angles).</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;&nbsp;for k from 1 to Np do<br />
&nbsp;&nbsp;&nbsp;&nbsp;EOM_ser[i] := subsop( 1 = convert( series( op( 1, EOM_ser[i] ), X[ k+1 ] ), polynom ), EOM_ser[i] );<br />
&nbsp;&nbsp;end do:<br />
&nbsp;&nbsp;EOM_ser[i] := simplify( EOM_ser[i] );<br />
end do:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">EOM_ser:</font></b>
</td></tr>
</table>
</p>
<p align="left">
</p>
</dl><dl><a name="MapleAutoBookmark17" />
<p align="left">
<b><font color="#000000" size="4">Additional Insight: Inertia (or mass) Matrix: Fi</font></b>
</p>
<p align="left">
<font color="#000000">The nonlinear system of equations resulting from the Lagrangian mechanics can be written in the following matrix form:</font>
</p>
<p align="left">
<font color="#000000">F( q ) . qdd + G( q, qd ) . qd + H( q ) . q = L( q, qd, u )</font>
</p>
<p align="left">
<font color="#000000">F, G, and H are called, respectively, the mass, damping, and stiffness matrices.</font>
</p>
<p align="left">
<font color="#000000">They are symmetric in form.</font>
</p>
<p align="left">
<font color="#000000">The inertia (a.k.a. mass) matrix, F, gives indications regarding the coupling existing in the system.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Fi := Matrix( Nq, Nq ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;&nbsp;for k from 1 to Nq do<br />
&nbsp;&nbsp;&nbsp;&nbsp;Fi[ i, k ] := simplify( diff( op( 1, EOM_states[i] ), Xd[k+Nq] ) );<br />
&nbsp;&nbsp;&nbsp;&nbsp;Fi[ i, k ] := collect( combine( Fi[ i, k ], trig ), cos );<br />
&nbsp;&nbsp;end do;<br />
end do:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">'F[i]' = Fi;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen82.gif" width="522" height="100" alt="F[i] = Matrix(%id = 19575592)" />
</p>
<p align="left">
<font color="#000000">Linearization of the inertia matrix for small-displacements</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Fi_lin := Matrix( Nq, Nq ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;&nbsp;for k from 1 to Nq do<br />
&nbsp;&nbsp;&nbsp;&nbsp;Fi_lin[ i, k ] := Fi[ i, k ];<br />
&nbsp;&nbsp;&nbsp;&nbsp;Fi_lin[ i, k ] := convert( series( Fi_lin[ i, k ], X[ 2 ] ), polynom );<br />
&nbsp;&nbsp;&nbsp;&nbsp;Fi_lin[ i, k ] := subs( subs_XUzero, Fi_lin[ i, k ] );<br />
&nbsp;&nbsp;end do; <br />
end do:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">'F_lin' = Fi_lin;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen83.gif" width="272" height="100" alt="F_lin = Matrix(%id = 19622920)" />
</p>
<p align="left">
</p>
</dl></dl><dl><a name="MapleAutoBookmark18" />
<p align="left">
<b><font color="#000000" size="5">Solving the Euler-Lagrange's Equations</font></b>
</p>
<dl><a name="MapleAutoBookmark19" />
<p align="left">
<b><font color="#000000" size="4">Reverse State Substitution for Pretty Display of the Solved EOM's</font></b>
</p>
<p align="left">
<font color="#000000">only for pretty print</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">subs_Xq_rev := { seq( X[i] = q[i], i=1..Nq ) }:<br />
subs_Xqd_rev := { seq( X[i+Nq] = qd[i], i=1..Nq ) }:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">#subs_U_rev := { U[1] = V[m] }: <br />
subs_U_rev := { U[1] = tau[m] }:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">eom_collect_list := { seq( diff( q[i], t ), i=1..Nq ), seq( q[i], i=1..Nq ), J[arm], J[p] };</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen84.gif" width="395" height="45" alt="eom_collect_list := {J[p], diff(alpha(t),t), J[arm], theta(t), alpha(t), diff(theta(t),t)}" />
</p>
<p align="left">
</p>
</dl><p align="left">
</p>
<dl><a name="MapleAutoBookmark20" />
<p align="left">
<b><font color="#000000" size="4">Solution to the Non-Linear Equations of Motion</font></b>
</p>
<p align="left">
<font color="#000000">Solve the non-linear form of the equations of motion for the states' second time derivatives</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Xqdd_solset_nl := solve( convert( EOM_states, set ), convert( Xqdd, set ) ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">assign( Xqdd_solset_nl );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do <br />
&nbsp;&nbsp;Xd_nl[i+Nq] := simplify( Xd[i+Nq] ):<br />
&nbsp;&nbsp;unassign( 'Xd[i+Nq]' ):<br />
end do:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">pretty display w.r.t. the named system states</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;Xd_nl[i+Nq] := simplify( subs( subs_U_rev, subs_Xq_rev, subs_Xqd_rev, Xd_nl[i+Nq] ) ):<br />
end do:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;&nbsp;diff( qd[i], t ) = collect( Xd_nl[i+Nq], eom_collect_list );<br />
end do:</font></b>
</td></tr>
</table>
</p>
</dl><dl><a name="MapleAutoBookmark21" />
<p align="left">
<b><font color="#000000" size="4">Solution to the Linearized EOM's</font></b>
</p>
<p align="left">
<font color="#000000">Solve the linear form of the equations of motion for the states' second time derivatives</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Xqdd_solset_ser := solve( convert( EOM_ser, set ), convert( Xqdd, set ) ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">assign( Xqdd_solset_ser );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">Moreover, for small angles</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">subs_avsq_list := { X[Nq+2]^2 = 0, X[Nq+3]^2 = 0 }:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;&nbsp;Xd[i+Nq] := subs( subs_avsq_list, Xd[i+Nq] );<br />
end;</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/rotpen85.gif" width="765" height="45" alt="Xd[3] := -1/2*(M[p]^2*L[p]^4*X[2]*X[3]*X[4]+2*M[p]*L[p]^2*D[r]*X[3]-M[p]^2*L[p]^3*L[r]*X[2]*X[3]^2+2*M[p]^2*L[p]^2*L[r]*X[2]*g+4*M[p]*L[p]*L[r]*D[p]*X[4]+4*J[p]*M[p]*L[p]^2*X[2]*X[3]*X[4]-8*J[p]*U[1]+8..." />
<br />
<img src="images/rotpen86.gif" width="716" height="31" alt="Xd[3] := -1/2*(M[p]^2*L[p]^4*X[2]*X[3]*X[4]+2*M[p]*L[p]^2*D[r]*X[3]-M[p]^2*L[p]^3*L[r]*X[2]*X[3]^2+2*M[p]^2*L[p]^2*L[r]*X[2]*g+4*M[p]*L[p]*L[r]*D[p]*X[4]+4*J[p]*M[p]*L[p]^2*X[2]*X[3]*X[4]-8*J[p]*U[1]+8..." />
</p>
<p align="left">
<img src="images/rotpen87.gif" width="766" height="29" alt="Xd[4] := (-M[p]^2*L[p]^3*L[r]*X[2]*X[3]*X[4]+2*M[p]*L[r]*L[p]*U[1]-2*M[p]*L[r]*L[p]*D[r]*X[3]+J[r]*X[2]*M[p]*X[3]^2*L[p]^2+M[p]^2*L[r]^2*X[2]*X[3]^2*L[p]^2-2*J[r]*X[2]*M[p]*g*L[p]-4*J[r]*D[p]*X[4]-2*M[..." />
<br />
<img src="images/rotpen88.gif" width="766" height="31" alt="Xd[4] := (-M[p]^2*L[p]^3*L[r]*X[2]*X[3]*X[4]+2*M[p]*L[r]*L[p]*U[1]-2*M[p]*L[r]*L[p]*D[r]*X[3]+J[r]*X[2]*M[p]*X[3]^2*L[p]^2+M[p]^2*L[r]^2*X[2]*X[3]^2*L[p]^2-2*J[r]*X[2]*M[p]*g*L[p]-4*J[r]*D[p]*X[4]-2*M[..." />
</p>
<p align="left">
<font color="#000000">pretty display w.r.t. the named system states</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">for i from 1 to Nq do<br />
&nbsp;&nbsp;diff( qd[i], t ) = collect( subs( subs_U_rev, subs_Xq_rev, subs_Xqd_rev, Xd[i+Nq] ), eom_collect_list );<br />
end do;</font></b>
</td></tr>
</table>
</p>
<p align="left">
<img src="images/rotpen89.gif" width="536" height="67" alt="diff(theta(t),`$`(t,2)) = -1/2*((4*M[p]*L[p]^2*alpha(t)*diff(theta(t),t)*diff(alpha(t),t)-8*tau[m]+8*D[r]*diff(theta(t),t))*J[p]+(M[p]^2*L[p]^4*alpha(t)*diff(theta(t),t)+4*M[p]*L[p]*L[r]*D[p])*diff(alp..." />
<br />
<img src="images/rotpen90.gif" width="735" height="58" alt="diff(theta(t),`$`(t,2)) = -1/2*((4*M[p]*L[p]^2*alpha(t)*diff(theta(t),t)*diff(alpha(t),t)-8*tau[m]+8*D[r]*diff(theta(t),t))*J[p]+(M[p]^2*L[p]^4*alpha(t)*diff(theta(t),t)+4*M[p]*L[p]*L[r]*D[p])*diff(alp..." />
<br />
<img src="images/rotpen91.gif" width="556" height="58" alt="diff(theta(t),`$`(t,2)) = -1/2*((4*M[p]*L[p]^2*alpha(t)*diff(theta(t),t)*diff(alpha(t),t)-8*tau[m]+8*D[r]*diff(theta(t),t))*J[p]+(M[p]^2*L[p]^4*alpha(t)*diff(theta(t),t)+4*M[p]*L[p]*L[r]*D[p])*diff(alp..." />
</p>
<p align="left">
<img src="images/rotpen92.gif" width="532" height="67" alt="diff(alpha(t),`$`(t,2)) = ((-M[p]^2*L[p]^3*L[r]*alpha(t)*diff(theta(t),t)-4*J[r]*D[p]-4*M[p]*L[r]^2*D[p])*diff(alpha(t),t)+((M[p]^2*L[p]^2*L[r]^2+M[p]*L[p]^2*J[r])*diff(theta(t),t)^2-2*J[r]*M[p]*L[p]*g..." />
<br />
<img src="images/rotpen93.gif" width="676" height="58" alt="diff(alpha(t),`$`(t,2)) = ((-M[p]^2*L[p]^3*L[r]*alpha(t)*diff(theta(t),t)-4*J[r]*D[p]-4*M[p]*L[r]^2*D[p])*diff(alpha(t),t)+((M[p]^2*L[p]^2*L[r]^2+M[p]*L[p]^2*J[r])*diff(theta(t),t)^2-2*J[r]*M[p]*L[p]*g..." />
<br />
<img src="images/rotpen94.gif" width="463" height="58" alt="diff(alpha(t),`$`(t,2)) = ((-M[p]^2*L[p]^3*L[r]*alpha(t)*diff(theta(t),t)-4*J[r]*D[p]-4*M[p]*L[r]^2*D[p])*diff(alpha(t),t)+((M[p]^2*L[p]^2*L[r]^2+M[p]*L[p]^2*J[r])*diff(theta(t),t)^2-2*J[r]*M[p]*L[p]*g..." />
</p>
<p align="left">
</p>
</dl></dl><dl><a name="MapleAutoBookmark22" />
<p align="left">
<b><font color="#000000" size="5">Determine the System State-Space Matrices: A, B, C, and D</font></b>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">A_ss := Matrix( Nx, Nx ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">A_ss := deriveA( Xqdd, A_ss, Nq, subs_XUzero ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">'A' = A_ss;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen95.gif" width="840" height="196" alt="A = Matrix(%id = 19673244)" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">B_ss := Matrix( Nx, Nu ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">B_ss := deriveB( Xqdd, B_ss, Nq, subs_XUzero ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">'B' = B_ss;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen96.gif" width="284" height="194" alt="B = Matrix(%id = 19728556)" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">C_ss := IdentityMatrix( Ny, Nx ):<br />
'C' = C_ss;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen97.gif" width="156" height="50" alt="C = Matrix(%id = 19860148)" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">D_ss := Matrix( Ny, Nu, 0 ):<br />
'D' = D_ss;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen98.gif" width="81" height="50" alt="D = Matrix(%id = 948252)" />
</p>
<p align="left">
</p>
</dl><p align="left">
</p>
<dl><a name="MapleAutoBookmark23" />
<p align="left">
<b><font color="#000000" size="5">Write A, B, C, and D to a Matlab file</font></b>
</p>
<p align="left">
<font color="#000000">Save the state-space matrices A, B, C and D to a MATLAB file.</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">if Pend_Config = SIP then<br />
Matlab_File_Name := "ROTPEN_ABCD_eqns.m":<br />
else<br />
Matlab_File_Name := "ROTPEN_GANTRY_ABCD_eqns.m":<br />
end;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen99.gif" width="334" height="20" alt="Matlab_File_Name := "ROTPEN_ABCD_eqns.m"" />
</p>
<p align="left">
<font color="#000000">unassign variables, when necessary, for those present in the "Matlab_Notations" substitution set</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">if assigned( D[r] ) then<br />
&nbsp;&nbsp;unassign( 'D[r]' );<br />
end if;</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">if assigned( D[p] ) then<br />
&nbsp;&nbsp;unassign( 'D[p]' );<br />
end if;</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">if assigned( J[r] ) then<br />
&nbsp;&nbsp;unassign( 'J[r]' );<br />
end if;</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">if assigned( J[p] ) then<br />
&nbsp;&nbsp;unassign( 'J[p]' );<br />
end if;</font></b>
</td></tr>
</table>
</p>
<p align="left">
<font color="#000000">substitution set containing a notation consistent with that used in the MATLAB design script(s)</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">Matlab_Notations := {M[r] = Mr, M[p]=Mp, l[p] = lp, L[p]=Lp, J[r] = Jr, J[p] = Jp, D[r] = Dr, D[p] = Dp, K[t] = Kt, K[m] = Km, K[g] = Kg, R[m] = Rm, eta[m] = eff_m, eta[g] = eff_g}:</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">if Pend_Config = SIP then<br />
Experiment_Name := "SRV02 Rotary Inverted Pendulum":<br />
else<br />
Experiment_Name := "SRV02 Rotary Gantry":<br />
end;</font></b>
</td></tr>
</table>
</p>
<p align="center">
<img src="images/rotpen100.gif" width="375" height="20" alt="Experiment_Name := "SRV02 Rotary Inverted Pendulum"" />
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">write_ABCD_to_Mfile( Matlab_File_Name, Experiment_Name, Matlab_Notations, A_ss, B_ss, C_ss, D_ss );</font></b>
</td></tr>
</table>
</p>
</dl><dl><a name="MapleAutoBookmark24" />
<p align="left">
<b><font color="#000000" size="5">Procedure Printing</font></b>
</p>
<p align="left">
<font color="#000000">default:</font>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">interface( verboseproc = 1 );</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"><b><font color="#FF0000">eval( lagrange_equations ):</font></b>
</td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr>
<td valign="top"><tt>&gt; &nbsp;&nbsp;</tt></td>
<td width="100%" valign="top"></td></tr>
</table>
</p>
<p align="left">
</p>
</dl><p align="left">
<a href="rotpen1.html#Description" target="Content">Click here to go back to top: Description Section</a><font color="#000000">.</font>
</p>
</basefont>
</body>
</html>
